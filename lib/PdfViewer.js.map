{"version":3,"sources":["../src/PdfViewer.js"],"names":["utils","PdfViewer","props","state","viewport","textLayers","startXpath","endXpath","selected","menuStyles","annocationDivs","pagesCount","AnnotationViewerOpacity","AnnotationLineWidth","EnableAnnotation","EnableRenderTextDiv","setTextContent","textContent","pdfPage","TextLayerRender","pageIndex","tempTextLayer","concat","setState","bind","setViewport","getScale","scale","PDFJS","getDocument","url","then","pdf","numPages","pageNum","getPage","getViewport","CSS_UNITS","getTextContent","normalizeWhitespace","textContentResolved","wrapperDivStyle","border","width","margin","viewer","pdfViewer","sort","a","b","key","map","e","module","exports"],"mappings":"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","file":"PdfViewer.js","sourcesContent":["import React, {\n    Component\n} from 'react';\n\nimport * as utils from './ui_utils';\n\nimport TextLayerBuilder from './TextLayerBuilder';\nimport PdfPageView from './PdfPageView';\nimport AnnotationViewer from './AnnotationViewer/AnnotationViewer';\nimport AnnotationBar from './AnnotationViewer/AnnotationBar';\n\nimport styles from './css/viewer.css';\n\nimport './PDFJS/pdf';\n\nclass PdfViewer extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            viewport: null,\n            textLayers: [],\n            startXpath: null,\n            endXpath: null,\n            selected: false,\n            menuStyles: {},\n            annocationDivs: [],\n            pagesCount: 0,\n            AnnotationViewerOpacity: this.props.AnnotationViewerOpacity ? this.props.AnnotationViewerOpacity : 0.4,\n            AnnotationLineWidth: 400,\n            EnableAnnotation: false,\n            EnableRenderTextDiv: false\n        }\n    }\n\n    componentDidMount() {\n\n        var setTextContent = (function setTextContent(textContent, pdfPage) {\n            const TextLayerRender =\n                <PdfPageView \n                    keyId={pdfPage.pageIndex} \n                    key={pdfPage.pageIndex}\n                    textContent={textContent} \n                    viewport={this.state.viewport} \n                    enhanceTextSelection={false}\n                    pdfPage={pdfPage}\n                    EnableRenderTextDiv={this.props.EnableRenderTextDiv}\n            />;\n            var tempTextLayer = this.state.textLayers.concat(TextLayerRender);\n            this.setState({\n                textLayers: tempTextLayer\n            })\n        }).bind(this)\n\n        var setViewport = (function setViewport(viewport, pagesCount) {\n            this.setState({\n                viewport,\n                pagesCount\n            });\n        }).bind(this)\n\n        var getScale = (function getScale() {\n            return this.props.scale;\n        }).bind(this)\n\n        PDFJS.getDocument(this.props.url).then(function(pdf) {\n            var pagesCount = pdf.numPages;\n            for (var pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n                pdf.getPage(pageNum).then(function(pdfPage) {\n                    var scale = getScale();\n                    setViewport(pdfPage.getViewport(scale * utils.CSS_UNITS), pagesCount);\n                    pdfPage.getTextContent({\n                        normalizeWhitespace: true,\n                    }).then(function textContentResolved(textContent) {\n                        setTextContent(textContent, pdfPage);\n                    })\n                })\n            }\n        });\n    }\n\n    render() {\n\n        const wrapperDivStyle = {\n            border: '9px solid transparent',\n            width: this.state.viewport ? this.state.viewport.width : 'auto',\n            margin: this.props.EnableAnnotation ? '' : '1px auto -8px auto'\n        }\n\n        return (\n            <div id={styles.viewer} \n                className={styles.pdfViewer}\n                >\n                <div style={wrapperDivStyle}>\n                {\n                    this.props.EnableAnnotation ?\n                    <div>\n                        <AnnotationBar />\n                        {\n                            this.state.pagesCount === 0 ? \"\" : \n                                <AnnotationViewer viewport={this.state.viewport} \n                                              pagesCount={this.state.pagesCount}\n                                              lineTextWidth={this.props.AnnotationLineWidth}\n                                              opacity = {this.props.AnnotationViewerOpacity}/>\n                        }\n                    </div> : \"\"\n                 }\n\n                {\n                    this.state.textLayers.sort((a,b) => {\n                        return a.key - b.key\n                    }).map((e) => e)\n                }\n                </div>\n            </div>\n        )\n    }\n}\n\nmodule.exports = PdfViewer;"]}